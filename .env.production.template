# ============================================================================
# Multi-Agent Platform - Production Configuration Template
# ============================================================================
# Copy this file to .env and fill in client-specific values
#
# REQUIRED fields are marked with [REQUIRED]
# OPTIONAL fields have defaults or can be left empty
# ============================================================================

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
NODE_ENV=production
PORT=3001
BASE_URL=http://localhost:3001
FRONTEND_URL=http://localhost:3000

# =============================================================================
# API KEYS [REQUIRED]
# =============================================================================
# Anthropic API key for Claude agents
# Get from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-xxx

# Voyage AI for vector embeddings (optional but recommended)
# Get from: https://www.voyageai.com/
VOYAGE_API_KEY=

# =============================================================================
# GITHUB OAUTH [REQUIRED]
# =============================================================================
# Create OAuth App at: https://github.com/settings/developers
# Set callback URL to: ${BASE_URL}/api/auth/github/callback
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# =============================================================================
# GITHUB APP (Optional - for advanced features)
# =============================================================================
# Create GitHub App at: https://github.com/settings/apps
# Required for: webhooks, check runs, advanced permissions
GITHUB_APP_ID=
GITHUB_INSTALLATION_ID=
GITHUB_WEBHOOK_SECRET=

# Private key (convert PEM to single line with \n)
# awk 'NF {sub(/\r/, ""); printf "%s\\n",$0;}' private-key.pem
GITHUB_PRIVATE_KEY=

# =============================================================================
# SECURITY [REQUIRED]
# =============================================================================
# Generate with: openssl rand -base64 32
JWT_SECRET=CHANGE_ME_GENERATE_RANDOM_SECRET
JWT_REFRESH_SECRET=CHANGE_ME_GENERATE_RANDOM_SECRET
SESSION_SECRET=CHANGE_ME_GENERATE_RANDOM_SECRET

# Token expiration
JWT_ACCESS_EXPIRE=1h
JWT_REFRESH_EXPIRE=7d

# =============================================================================
# DATABASE (Auto-configured for Docker)
# =============================================================================
# If using external MongoDB, change this
MONGODB_URI=mongodb://mongodb:27017/agents-prod

# =============================================================================
# WORKSPACE CONFIGURATION (Auto-configured)
# =============================================================================
# Base directory for agent workspaces
# In Docker: /mnt/data/agent-workspace (mounted from Persistent Disk)
AGENT_WORKSPACE_DIR=/mnt/data/agent-workspace

# =============================================================================
# WORKSPACE CLEANUP (DISABLED by default - Client controls)
# =============================================================================
# Uncomment to enable automatic cleanup
# WORKSPACE_AUTO_CLEANUP_ENABLED=true
# WORKSPACE_CLEANUP_INTERVAL_HOURS=1
# WORKSPACE_MAX_AGE_HOURS=168

# =============================================================================
# REDIS (Optional - for caching)
# =============================================================================
# REDIS_URL=redis://localhost:6379

# =============================================================================
# FIREBASE STORAGE (Optional - for file uploads)
# =============================================================================
# FIREBASE_STORAGE_BUCKET=your-bucket.appspot.com
# FIREBASE_SERVICE_ACCOUNT={"type":"service_account",...}

# =============================================================================
# PERFORMANCE FLAGS
# =============================================================================
ENABLE_PERFORMANCE_CACHE=true
ENABLE_FILE_CONTENT_CACHE=true
ENABLE_ENHANCED_GIT_EXECUTION=true
ENABLE_AGGRESSIVE_COMPACTION=true

# =============================================================================
# GIT OPERATION TIMEOUTS (milliseconds)
# =============================================================================
# Generous timeouts for large repositories
GIT_CLONE_TIMEOUT=600000
GIT_PUSH_TIMEOUT=600000
GIT_COMMIT_TIMEOUT=300000

# =============================================================================
# RECOVERY
# =============================================================================
AUTO_RECOVER_ON_STARTUP=true
CANCELLATION_CHECK_INTERVAL_MS=5000
